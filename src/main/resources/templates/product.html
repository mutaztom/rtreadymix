<!DOCTYPE html>
<html lang="en">
{#include base}
<body>
{#icon}
<img src="../images/services.png" alt="service"/>
{/}
{#rtbody}
{!{#include inputbox/}!}
{#if result}
<div class="alert alert-danger">{result}</div>
{/if}
<div class="row">
    <div class="col-lg-6 col-sm-12 col-md-6">
        <form action="/readymix/saveservice" method="post" id="frmservice">
            <div class="form-row">
                <div class="col">
                    <label for="txtid">Id</label>
                    <input type="text" id="txtid" name="id" class="form-control" value="{service.id}"
                           placeholder="Read Only auto generated id"
                           readonly>
                </div>

                <div class="input-group mb-3">
                    <label for="ddcat">Category</label>
                    <select id="ddcat" name="ddcategory" class="form-control">
                        {#for cat in prodcat}
                        <option label="{cat.item}" value="{cat.id}"></option>
                        {/for}
                    </select>
                    <div class="input-group-prepend">
                        <button class="btn btn-outline-secondary fa fa-plus-circle" onclick="onAddCat();" type="button"
                                id="cmdaddcat"></button>
                    </div>
                </div>
            </div>
            <label for="txtitem">Name</label>
            <input type="text" id="txtitem" class="form-control" name="item" placeholder="product Name"
                   value="{product.item}">
            <label for="txtaritem">Arabic Name</label>
            <input type="text" id="txtaritem" class="form-control" name="aritem" placeholder="product Name in Arabic">
            <label for="txtdescription">Description</label>
            <textarea class="form-control" id="txtdescription" name="description">{product.description}</textarea>
            <div class="form-row">
                <div class="col">
                    <label for="ddunit">Unit</label>
                    <select name="unit" id="ddunit" class="form-control">
                        {#for unit in units}
                        <option value="{unit.id}" label="{unit.item}" selected="{product.unit}"></option>
                        {/for}
                    </select>
                </div>
                <div class="col">
                    <label for="txtunitprice">Unit Price</label>
                    <input class="form-control" name="unitprice" value="{product.unitPrice}" id="txtunitprice">
                </div>
            </div>
            <label for="ddmember"></label>
            <select name="unit" id="ddmember" class="form-control">
                {#for m in member}
                <option value="{m.id}" label="{m.item}"></option>
                {/for}
            </select>

            <button class="btn btn-primary fa fa-save" name="command" value="cmdsave">Save</button>
            <button class="btn btn-danger fa fa-trash" name="command" value="cmddelete">Delete</button>
            <button class="btn btn-primary fa fa-backward" type="button" name="command" value="cmdexit"
                    onclick="onexit();">Close
            </button>
        </form>
    </div>
    <div class="col-lg-6 col-md-6 col-sm-12">
        <output>product data not found</output>
        <output>product Index</output>
    </div>
</div>
<script type="text/javascript">
    function onexit() {
        var def = confirm("Are you sure you want to exit.");
        if (def)
            location.assign("/readymix/rtbrowse?type=product");
    }

    function onAddCat() {
        var catname = prompt("Please type new category name");
        if (catname) {
            $('#newcat').val(catname);
            $.ajax({
                type: "POST",
                url: "/readymix/saveservice",
                data: {"command": "cmdaddcat", "newcat": catname},
                success: new function () {
                    console.log("data saved successfully");
                    $("#ddcat").refresh();
                },
                error: new function () {
                    alert("could not save new category");
                }
            });
        }
    }

    function showInput() {
        $('<form><input type="text" style="z-index:10000" name="name"><br></form>').dialog({
            modal: true,
            buttons: {
                'OK': function () {
                    var name = $('input[name="name"]').val();
                    storeData(name);
                    $(this).dialog('close');
                },
                'Cancel': function () {
                    $(this).dialog('close');
                }
            }
        });
    }
</script>
{/}
</body>
{/}
</html>